# 调度与策略

## 核心流程
1. 计算初始就绪集（入度为 0）。
2. 就绪节点选择执行器（节点指定或默认），`executor->submit(fn)` 得到 `result<void>`。
3. 完成回调：触发 `on_complete`，对每个下游 `indegree--`，入度为 0 则入队。
4. 错误回调：收集异常；`continue_on_error` 记录并继续；`cancel_on_error` 取消尚未启动的下游。
5. 终止：所有节点进入终态或整体超时触发；完成 `result<void>`。

## 并发控制与公平
- 并发度：由执行器（如线程池）决定；可选逻辑并发上限。
- 公平性：就绪队列默认 FIFO；后续可按优先级/层级优化。

## 超时
- 整体超时：`timer_queue` oneshot 定时器触发时终止尚未启动的节点并以超时完成。
- 节点级超时（后续）：节点 `fn` 可结合 `delay_object` 或 `result.timeout(...)` 实现。

## 取消传播语义
- 采用“取消全下游”策略直观且一致；后续可提供细粒度选项（仅直接下游/可达下游）。